<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Tradutor Profissional - Voz & C√¢mera</title>

    <!-- Tesseract.js para OCR -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-user-select: none; user-select: none; }
        html, body { width: 100%; height: 100%; overflow: hidden; }
        body { font-family: -apple-system, system-ui, sans-serif; background: #0f172a; color: #f0f4f8; display: flex; flex-direction: column; }
        .container { flex: 1; overflow-y: auto; display: flex; flex-direction: column; }
        .header { background: #1a2a4a; padding: 1.5rem 1rem; text-align: center; border-bottom: 1px solid #3b82f6; position: sticky; top: 0; z-index: 50; }
        .header h1 { font-size: 1.5rem; color: #60a5fa; }

        .status-bar { display: flex; gap: 0.5rem; justify-content: center; align-items: center; margin-top: 0.5rem; }
        .status-indicator { display: flex; align-items: center; gap: 0.5rem; padding: 0.3rem 0.7rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600; border: 1px solid #3b82f6; }
        .status-indicator.online { color: #86efac; border-color: #22c55e; }
        .status-indicator.offline { color: #fca5a5; border-color: #ef4444; }

        .nav-tabs { display: flex; background: #1e293b; padding: 0.5rem; gap: 0.5rem; border-bottom: 1px solid rgba(96, 165, 250, 0.2); }
        .tab-btn { flex: 1; padding: 0.6rem; border: none; border-radius: 0.5rem; background: transparent; color: #94a3b8; font-weight: bold; cursor: pointer; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 0.4rem; }
        .tab-btn.active { background: #3b82f6; color: white; }

        .content { flex: 1; padding: 1rem; display: flex; flex-direction: column; gap: 1rem; }
        .tab-panel { display: none; flex-direction: column; gap: 1rem; }
        .tab-panel.active { display: flex; }

        .card { background: rgba(30, 41, 59, 0.7); border: 1px solid rgba(96, 165, 250, 0.2); border-radius: 1rem; padding: 1rem; }
        .language-btn { width: 100%; padding: 0.7rem; background: #1e293b; border: 1px solid #3b82f6; border-radius: 0.5rem; color: white; display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; cursor: pointer; }

        textarea { width: 100%; background: transparent; border: none; color: white; font-size: 1.1rem; resize: none; min-height: 80px; outline: none; -webkit-user-select: text; user-select: text; }
        .output-text { min-height: 80px; font-size: 1.1rem; color: #60a5fa; font-weight: 600; word-wrap: break-word; }

        .btn-row { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
        .btn-main { flex: 2; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; padding: 0.7rem; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .btn-main.listening { background: #ef4444; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
        .btn-secondary { flex: 1; background: #334155; color: white; border: none; border-radius: 0.5rem; padding: 0.7rem; cursor: pointer; font-size: 1.2rem; }

        /* C√¢mera Styles */
        .camera-container { position: relative; width: 100%; aspect-ratio: 4/3; background: #000; border-radius: 1rem; overflow: hidden; border: 2px solid #3b82f6; }
        #cameraVideo { width: 100%; height: 100%; object-fit: cover; }
        #cameraCanvas { display: none; }
        .camera-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; border: 2px dashed rgba(96, 165, 250, 0.5); display: flex; align-items: center; justify-content: center; }
        .camera-overlay::after { content: "Posicione o texto aqui"; color: rgba(255,255,255,0.7); font-size: 0.8rem; background: rgba(0,0,0,0.5); padding: 0.2rem 0.5rem; border-radius: 4px; }

        .ocr-loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(30, 41, 59, 0.9); padding: 1rem; border-radius: 1rem; display: none; flex-direction: column; align-items: center; gap: 0.5rem; z-index: 20; }
        .spinner { width: 30px; height: 30px; border: 3px solid #3b82f6; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Dropdowns & Modals */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; padding: 2rem 1rem; }
        .modal-content { background: #1e293b; border-radius: 1rem; height: 100%; display: flex; flex-direction: column; overflow: hidden; }
        .modal-header { padding: 1rem; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; }
        .lang-list { flex: 1; overflow-y: auto; padding: 0.5rem; }
        .lang-item { padding: 1rem; border-bottom: 1px solid #334155; display: flex; align-items: center; gap: 1rem; cursor: pointer; }
        .lang-item:active { background: #3b82f6; }
        .lang-group { padding: 0.5rem 1rem; background: #0f172a; font-size: 0.7rem; font-weight: bold; color: #60a5fa; text-transform: uppercase; }

        #toast { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); background: #3b82f6; color: white; padding: 0.8rem 1.5rem; border-radius: 2rem; font-size: 0.9rem; font-weight: bold; display: none; z-index: 200; box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

    <div class="header">
        <h1>Tradutor Profissional</h1>
        <div class="status-bar">
            <div id="onlineStatus" class="status-indicator online">‚óè Online</div>
        </div>
    </div>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('voice')">üë©‚Äçüé§ Voz</button>
        <button class="tab-btn" onclick="switchTab('text')">‚å®Ô∏è Texto/Voz</button>
        <button class="tab-btn" onclick="switchTab('camera')">üì∑ C√¢mera</button>
        <button class="tab-btn" onclick="switchTab('gallery')">üñºÔ∏è Galeria</button>
    </div>

    <div class="container">
        <div class="content">
            
            <!-- Aba Voz -->
            <div id="voicePanel" class="tab-panel active">
                <div class="card">
                    <button class="language-btn" onclick="openLangModal('source')">
                        <span id="sourceLangLabel">üáßüá∑ Portugu√™s (Brasil)</span> ‚ñº
                    </button>
                    <textarea id="inputText" placeholder="Digite ou fale aqui..." oninput="translateText()"></textarea>
                    <div class="btn-row">
                        <button id="micBtn" class="btn-main" onclick="toggleSpeech()">üé§ FALAR</button>
                        <button class="btn-secondary" onclick="clearText()">‚úï</button>
                    </div>
                </div>

                <div class="card">
                    <button class="language-btn" onclick="openLangModal('target')">
                        <span id="targetLangLabel">üá∫üá∏ English (USA)</span> ‚ñº
                    </button>
                    <div id="outputText" class="output-text">Tradu√ß√£o aparecer√° aqui...</div>
                    <div class="btn-row">
                        <button id="speakBtn" class="btn-main" onclick="speakTranslation()">üîä OUVIR</button>
                        <button class="btn-secondary" onclick="copyTranslation()">üìã</button>
                        <button class="btn-secondary" onclick="swapLanguages()">‚áÑ</button>
                    </div>
                </div>
            </div>

            <!-- Aba Texto -->
            <div id="textPanel" class="tab-panel">
                <p style="text-align:center; color:#94a3b8; font-size:0.8rem;">Use a aba Voz para tradu√ß√£o de texto e √°udio.</p>
            </div>

            <!-- Aba C√¢mera -->
            <div id="cameraPanel" class="tab-panel">
                <div class="camera-container">
                    <video id="cameraVideo" autoplay playsinline></video>
                    <canvas id="cameraCanvas"></canvas>
                    <div class="camera-overlay"></div>
                    <div id="ocrLoading" class="ocr-loading">
                        <div class="spinner"></div>
                        <span id="ocrStatusText" style="color:white; font-size:0.8rem;">Iniciando...</span>
                    </div>
                </div>
                <button class="btn-main" onclick="captureAndTranslate()" style="margin-top:1rem;">üì∏ TRADUZIR PARA PORTUGU√äS</button>
                <div class="card" style="margin-top:1rem;">
                    <div id="cameraResult" class="output-text">O texto extra√≠do aparecer√° aqui...</div>
                </div>
            </div>

            <!-- Aba Galeria -->
            <div id="galleryPanel" class="tab-panel">
                <div class="card" style="text-align:center; padding: 2rem;">
                    <input type="file" id="fileInput" accept="image/*" style="display:none" onchange="handleFileSelect(event)">
                    <button class="btn-main" onclick="document.getElementById('fileInput').click()">üìÅ ESCOLHER IMAGEM</button>
                    <p style="margin-top:1rem; color:#94a3b8; font-size:0.8rem;">Selecione uma foto com texto para traduzir.</p>
                </div>
                <div id="galleryPreview" style="display:none; margin-top:1rem;">
                    <img id="previewImg" style="width:100%; border-radius:1rem; border:1px solid #3b82f6;">
                </div>
                <div class="card" style="margin-top:1rem;">
                    <div id="galleryResult" class="output-text">Resultado da galeria...</div>
                </div>
            </div>

        </div>
    </div>

    <!-- Modal de Idiomas -->
    <div id="langModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color:white; font-size:1.2rem;">Selecionar Idioma</h2>
                <button class="btn-secondary" onclick="closeLangModal()">‚úï</button>
            </div>
            <div class="lang-list" id="langList"></div>
        </div>
    </div>

    <div id="toast">Copiado!</div>

    <script>
        // Configura√ß√µes de Idiomas
        const languages = [
            { group: "Am√©ricas", list: [
                { code: 'pt-BR', name: 'Portugu√™s (Brasil)', flag: 'üáßüá∑' },
                { code: 'en-US', name: 'English (USA)', flag: 'üá∫üá∏' },
                { code: 'es-ES', name: 'Espa√±ol (Espa√±a)', flag: 'üá™üá∏' },
                { code: 'es-MX', name: 'Espa√±ol (M√©xico)', flag: 'üá≤üáΩ' },
                { code: 'fr-CA', name: 'Fran√ßais (Canada)', flag: 'üá®üá¶' }
            ]},
            { group: "Europa", list: [
                { code: 'pt-PT', name: 'Portugu√™s (Portugal)', flag: 'üáµüáπ' },
                { code: 'en-GB', name: 'English (UK)', flag: 'üá¨üáß' },
                { code: 'fr-FR', name: 'Fran√ßais (France)', flag: 'üá´üá∑' },
                { code: 'de-DE', name: 'Deutsch (Deutschland)', flag: 'üá©üá™' },
                { code: 'it-IT', name: 'Italiano (Italia)', flag: 'üáÆüáπ' },
                { code: 'ru-RU', name: '–†—É—Å—Å–∫–∏–π (Rossiya)', flag: 'üá∑üá∫' },
                { code: 'nl-NL', name: 'Nederlands (Nederland)', flag: 'üá≥üá±' },
                { code: 'pl-PL', name: 'Polski (Polska)', flag: 'üáµüá±' },
                { code: 'sv-SE', name: 'Svenska (Sverige)', flag: 'üá∏üá™' },
                { code: 'no-NO', name: 'Norsk (Norge)', flag: 'üá≥üá¥' },
                { code: 'da-DK', name: 'Dansk (Danmark)', flag: 'üá©üá∞' },
                { code: 'fi-FI', name: 'Suomi (Suomi)', flag: 'üá´üáÆ' },
                { code: 'el-GR', name: 'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ (Ell√°da)', flag: 'üá¨üá∑' },
                { code: 'tr-TR', name: 'T√ºrk√ße (T√ºrkiye)', flag: 'üáπüá∑' }
            ]},
            { group: "√Åsia/Oceania", list: [
                { code: 'zh-CN', name: 'ÁÆÄ‰Ωì‰∏≠Êñá (‰∏≠ÂõΩ)', flag: 'üá®üá≥' },
                { code: 'ja-JP', name: 'Êó•Êú¨Ë™û (Êó•Êú¨)', flag: 'üáØüáµ' },
                { code: 'ko-KR', name: 'ÌïúÍµ≠Ïñ¥ (Daehanminguk)', flag: 'üá∞üá∑' },
                { code: 'hi-IN', name: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (BhƒÅrat)', flag: 'üáÆüá≥' },
                { code: 'th-TH', name: '‡πÑ‡∏ó‡∏¢ (Prathet Thai)', flag: 'üáπüá≠' },
                { code: 'vi-VN', name: 'Ti·∫øng Vi·ªát (Vi·ªát Nam)', flag: 'üáªüá≥' },
                { code: 'id-ID', name: 'Bahasa Indonesia', flag: 'üáÆüá©' },
                { code: 'ms-MY', name: 'Bahasa Melayu', flag: 'üá≤üáæ' },
                { code: 'bn-BD', name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bangladesh)', flag: 'üáßüá©' },
                { code: 'he-IL', name: '◊¢◊ë◊®◊ô◊™ (Yisra\'el)', flag: 'üáÆüá±' },
                { code: 'ar-SA', name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (As-Sa\'≈´diyyah)', flag: 'üá∏üá¶' }
            ]},
            { group: "√Åfrica", list: [
                { code: 'sw-KE', name: 'Kiswahili (Kenya)', flag: 'üá∞üá™' },
                { code: 'af-ZA', name: 'Afrikaans (Suid-Afrika)', flag: 'üáøüá¶' },
                { code: 'yo-NG', name: 'Yor√πb√° (N√†√¨j√≠r√≠√†)', flag: 'üá≥üá¨' },
                { code: 'zu-ZA', name: 'isiZulu (Ningizimu Afrika)', flag: 'üáøüá¶' },
                { code: 'am-ET', name: '·ä†·àõ·à≠nya (ƒ™ty≈ç·πó·πóyƒÅ)', flag: 'üá™üáπ' }
            ]}
        ];

        let sourceLang = 'pt-BR';
        let targetLang = 'en-US';
        let activeModalType = 'source';
        let tesseractWorker = null;
        let translateTimeout = null;

        // Inicializa√ß√£o
        async function init() {
            renderLangList();
            checkOnlineStatus();
            window.addEventListener('online', checkOnlineStatus);
            window.addEventListener('offline', checkOnlineStatus);
            await initTesseract();
        }

        async function initTesseract() {
            if (!tesseractWorker) {
                tesseractWorker = await Tesseract.createWorker({
                    logger: m => {
                        if (m.status === 'recognizing text') {
                            const progress = Math.round(m.progress * 100);
                            const statusText = document.getElementById('ocrStatusText');
                            if (statusText) statusText.innerText = `Lendo: ${progress}%`;
                        }
                    }
                });
                // Carrega m√∫ltiplos idiomas para detec√ß√£o autom√°tica
                await tesseractWorker.loadLanguage('por+eng+spa+fra+deu+ita+jpn+chi_sim');
                await tesseractWorker.initialize('por+eng+spa+fra+deu+ita+jpn+chi_sim');
                await tesseractWorker.setParameters({
                    tessedit_pageseg_mode: Tesseract.PSM.SINGLE_BLOCK,
                });
            }
        }

        function checkOnlineStatus() {
            const status = document.getElementById('onlineStatus');
            if (navigator.onLine) {
                status.innerText = '‚óè Online';
                status.className = 'status-indicator online';
            } else {
                status.innerText = '‚óè Offline (Limitado)';
                status.className = 'status-indicator offline';
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            
            event.currentTarget.classList.add('active');
            document.getElementById(tab + 'Panel').classList.add('active');

            if (tab === 'camera') startCamera();
            else stopCamera();
        }

        function openLangModal(type) {
            activeModalType = type;
            document.getElementById('langModal').style.display = 'block';
        }

        function closeLangModal() {
            document.getElementById('langModal').style.display = 'none';
        }

        function selectLang(code, name, flag) {
            if (activeModalType === 'source') {
                sourceLang = code;
                document.getElementById('sourceLangLabel').innerText = flag + ' ' + name;
            } else {
                targetLang = code;
                document.getElementById('targetLangLabel').innerText = flag + ' ' + name;
            }
            closeLangModal();
            translateText();
        }

        function renderLangList() {
            const container = document.getElementById('langList');
            languages.forEach(group => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'lang-group';
                groupDiv.innerText = group.group;
                container.appendChild(groupDiv);

                group.list.forEach(lang => {
                    const item = document.createElement('div');
                    item.className = 'lang-item';
                    item.innerHTML = `<span>${lang.flag}</span> <span>${lang.name}</span>`;
                    item.onclick = () => selectLang(lang.code, lang.name, lang.flag);
                    container.appendChild(item);
                });
            });
        }

        async function translateText() {
            const text = document.getElementById('inputText').value;
            const output = document.getElementById('outputText');
            
            if (!text.trim()) {
                output.innerText = 'Tradu√ß√£o aparecer√° aqui...';
                return;
            }

            clearTimeout(translateTimeout);
            translateTimeout = setTimeout(async () => {
                output.innerText = 'Traduzindo...';
                try {
                    const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${sourceLang}|${targetLang}`);
                    const data = await res.json();
                    output.innerText = data.responseData.translatedText;
                } catch (err) {
                    output.innerText = 'Erro na tradu√ß√£o. Verifique sua conex√£o.';
                }
            }, 500);
        }

        let recognition;
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onstart = () => {
                document.getElementById('micBtn').classList.add('listening');
                document.getElementById('micBtn').innerText = 'üõë OUVINDO...';
            };

            recognition.onend = () => {
                document.getElementById('micBtn').classList.remove('listening');
                document.getElementById('micBtn').innerText = 'üé§ FALAR';
            };

            recognition.onresult = (event) => {
                const text = event.results[0][0].transcript;
                document.getElementById('inputText').value = text;
                translateText();
            };
        }

        function toggleSpeech() {
            if (recognition) {
                recognition.lang = sourceLang;
                recognition.start();
            } else {
                alert('Reconhecimento de voz n√£o suportado.');
            }
        }

        function speakTranslation() {
            const text = document.getElementById('outputText').innerText;
            if (text === 'Tradu√ß√£o aparecer√° aqui...' || text === 'Traduzindo...') return;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = targetLang;
            window.speechSynthesis.speak(utterance);
        }

        let stream;
        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } } 
                });
                document.getElementById('cameraVideo').srcObject = stream;
                initTesseract();
            } catch (err) {
                alert('Erro ao acessar c√¢mera: ' + err.message);
            }
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        }

        async function captureAndTranslate() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.getElementById('cameraCanvas');
            const context = canvas.getContext('2d');
            const loading = document.getElementById('ocrLoading');
            const resultDiv = document.getElementById('cameraResult');

            // Aumentar a escala para melhor precis√£o
            const scale = 1.5; 
            canvas.width = video.videoWidth * scale;
            canvas.height = video.videoHeight * scale;
            
            // Pr√©-processamento agressivo para OCR
            context.filter = 'contrast(1.5) grayscale(1) brightness(1.1)';
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            loading.style.display = 'flex';
            resultDiv.innerText = 'Lendo imagem...';

            try {
                await initTesseract();
                const { data: { text } } = await tesseractWorker.recognize(canvas);

                if (text && text.trim().length > 1) {
                    resultDiv.innerText = 'Traduzindo para Portugu√™s...';
                    // Limpar o texto de caracteres estranhos comuns em OCR
                    const cleanText = text.replace(/[\n\r]+/g, ' ').trim();
                    
                    const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(cleanText)}&langpair=auto|pt-BR`);
                    const data = await res.json();
                    
                    if (data.responseData && data.responseData.translatedText) {
                        resultDiv.innerHTML = `<div style="border-bottom:1px solid #3b82f6; padding-bottom:5px; margin-bottom:5px; font-size:0.9rem; color:#94a3b8;">Original: ${cleanText}</div><strong>Tradu√ß√£o:</strong> ${data.responseData.translatedText}`;
                    } else {
                        resultDiv.innerText = 'Erro na tradu√ß√£o. Tente novamente.';
                    }
                } else {
                    resultDiv.innerText = 'Nenhum texto n√≠tido encontrado. Aproxime mais a c√¢mera.';
                }
            } catch (err) {
                resultDiv.innerText = 'Erro: ' + err.message;
            } finally {
                loading.style.display = 'none';
            }
        }

        async function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = async (e) => {
                document.getElementById('galleryPreview').style.display = 'block';
                document.getElementById('previewImg').src = e.target.result;
                const resultDiv = document.getElementById('galleryResult');
                resultDiv.innerText = 'Lendo imagem...';

                try {
                    await initTesseract();
                    const { data: { text } } = await tesseractWorker.recognize(e.target.result);
                    
                    if (text && text.trim().length > 1) {
                        resultDiv.innerText = 'Traduzindo para Portugu√™s...';
                        const cleanText = text.replace(/[\n\r]+/g, ' ').trim();
                        
                        const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(cleanText)}&langpair=auto|pt-BR`);
                        const data = await res.json();
                        
                        if (data.responseData && data.responseData.translatedText) {
                            resultDiv.innerHTML = `<div style="border-bottom:1px solid #3b82f6; padding-bottom:5px; margin-bottom:5px; font-size:0.9rem; color:#94a3b8;">Original: ${cleanText}</div><strong>Tradu√ß√£o:</strong> ${data.responseData.translatedText}`;
                        } else {
                            resultDiv.innerText = 'Erro na tradu√ß√£o.';
                        }
                    } else {
                        resultDiv.innerText = 'N√£o foi poss√≠vel ler o texto desta imagem.';
                    }
                } catch (err) {
                    resultDiv.innerText = 'Erro ao processar imagem.';
                }
            };
            reader.readAsDataURL(file);
        }

        function clearText() {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').innerText = 'Tradu√ß√£o aparecer√° aqui...';
        }

        function copyTranslation() {
            const text = document.getElementById('outputText').innerText;
            if (text === 'Tradu√ß√£o aparecer√° aqui...' || text === 'Traduzindo...') return;
            navigator.clipboard.writeText(text);
            const toast = document.getElementById('toast');
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 2000);
        }

        function swapLanguages() {
            const temp = sourceLang;
            sourceLang = targetLang;
            targetLang = temp;
            
            const sLabel = document.getElementById('sourceLangLabel').innerText;
            const tLabel = document.getElementById('targetLangLabel').innerText;
            document.getElementById('sourceLangLabel').innerText = tLabel;
            document.getElementById('targetLangLabel').innerText = sLabel;

            const input = document.getElementById('inputText').value;
            const output = document.getElementById('outputText').innerText;
            if (input && output && output !== 'Traduzindo...' && output !== 'Tradu√ß√£o aparecer√° aqui...') {
                document.getElementById('inputText').value = output;
                translateText();
            }
        }

        init();
    </script>
</body>
</html>
